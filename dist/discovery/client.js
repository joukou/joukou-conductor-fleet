var DiscoveryClient, DiscoveryMethod, DiscoveryResource, DiscoverySchema, Q, request, _;

Q = require("q");

request = require("request");

DiscoveryResource = require("./resource");

DiscoveryMethod = require("./method");

DiscoverySchema = require("./schema");

_ = require("lodash");

DiscoveryClient = (function() {
  DiscoveryClient.prototype.kind = "";

  DiscoveryClient.prototype.discoveryVersion = "";

  DiscoveryClient.prototype.id = "";

  DiscoveryClient.prototype.name = "";

  DiscoveryClient.prototype.version = "";

  DiscoveryClient.prototype.title = "";

  DiscoveryClient.prototype.description = "";

  DiscoveryClient.prototype.documentLink = "";

  DiscoveryClient.prototype.protocol = "";

  DiscoveryClient.prototype.baseUrl = "";

  DiscoveryClient.prototype.basePath = "";

  DiscoveryClient.prototype.rootUrl = "";

  DiscoveryClient.prototype.servicePath = "";

  DiscoveryClient.prototype.batchPath = "";

  DiscoveryClient.prototype.endpoint = "";

  DiscoveryClient.prototype.resources = {};

  DiscoveryClient.prototype.schemas = {};

  DiscoveryClient.prototype._complete = false;

  DiscoveryClient.prototype._error = null;

  DiscoveryClient.prototype._discovering = false;

  DiscoveryClient.prototype._resolveOnDiscovery = [];

  DiscoveryClient.prototype._request = request;


  /**
  @param {string} endpoint
  @param {string} [basePath='/v1-alpha/']
  @param {boolean} [doDiscovery=false]
   */

  function DiscoveryClient(endpoint, basePath, doDiscovery) {
    var client;
    this.endpoint = endpoint;
    this.basePath = basePath;
    this._validateEndpoint();
    client = this;
    Object.defineProperty(this, "on", {
      get: function() {
        return client._onGet();
      }
    });
    if (doDiscovery) {
      this.doDiscovery();
    }
  }

  DiscoveryClient.prototype._onGet = function() {
    var client;
    client = this;
    return {
      schema: function(schemaName) {
        var deferred;
        deferred = Q.defer();
        client.onDiscovery().then(function() {
          if (!client.hasSchema(schemaName)) {
            deferred.reject(new Error("No schema " + schemaName));
            return;
          }
          return deferred.resolve(client.getSchema(schemaName));
        }).fail(deferred.reject);
        return deferred.promise;
      },
      resource: function(resourceName) {
        var deferred;
        deferred = Q.defer();
        client.onDiscovery().then(function() {
          if (!client.hasResource(resourceName)) {
            deferred.reject(new Error("No resource " + resourceName));
            return;
          }
          return deferred.resolve(client.getResource(resourceName));
        }).fail(deferred.reject);
        return deferred.promise;
      },
      method: function(resourceName, methodName, args) {
        var deferred;
        deferred = Q.defer();
        this.resource(resourceName).then(function(resource) {
          var method;
          if (!resource.hasMethod(methodName)) {
            deferred.reject(new Error("No method " + methodName + " for resource " + resourceName));
            return;
          }
          method = resource.wrapCallMethod(methodName);
          if (!args) {
            deferred.resolve(method);
            return;
          }
          if (!_.isArray(args)) {
            deferred.reject(new Error("Arguments must be an array"));
            return;
          }
          return method.apply(resource, args).then(deferred.resolve).fail(deferred.reject);
        }).fail(deferred.reject);
        return deferred.promise;
      }
    };
  };

  DiscoveryClient.prototype._validateEndpoint = function() {
    if (!this.endpoint) {
      throw new Error("Endpoint is required");
    }
    if (typeof this.endpoint !== "string") {
      throw new TypeError("Endpoint is expected to be a string");
    }
    if (this.basePath === null || this.basePath === void 0) {
      this.basePath = "/v1-alpha/";
    } else if (typeof this.basePath !== "string") {
      throw new TypeError("Base path is expected to be a string");
    }
    if (this._lastCharacter(this.endpoint) === "/") {
      this.endpoint = this._stripLastCharacter(this.endpoint);
    }
    if (this._firstCharacter(this.basePath) !== "/") {
      this.basePath = "/" + this.basePath;
    }
    if (this._lastCharacter(this.basePath) !== "/") {
      return this.basePath = "" + this.basePath + "/";
    }
  };

  DiscoveryClient.prototype._stripLastCharacter = function(str) {
    var length;
    if (!str || typeof str !== "string") {
      return "";
    }
    length = str.length;
    return str.substring(0, length - 1);
  };

  DiscoveryClient.prototype._firstCharacter = function(str) {
    if (!str || typeof str !== "string") {
      return null;
    }
    return str.substring(0, 1);
  };

  DiscoveryClient.prototype._lastCharacter = function(str) {
    var length;
    if (!str || typeof str !== "string") {
      return null;
    }
    length = str.length;
    return str.substring(length - 1, length);
  };

  DiscoveryClient.prototype.doDiscovery = function() {
    var deferred;
    deferred = Q.defer();
    if (this._complete) {
      if (this._error) {
        deferred.reject(this._error);
      } else {
        deferred.resolve(this);
      }
      return deferred.promise;
    }
    this._resolveOnDiscovery.push(deferred);
    if (this._discovering) {
      return deferred.promise;
    }
    this._discovering = true;
    this._doDiscoveryRequest();
    return deferred.promise;
  };

  DiscoveryClient.prototype._doDiscoveryRequest = function() {
    var client;
    client = this;
    return this._request.get("" + this.endpoint + this.basePath + "discovery.json", function(error, response, body) {
      return client._onDiscoveryResult(error, response, body);
    });
  };

  DiscoveryClient.prototype._rejectWithError = function(error) {
    var i, _i, _len, _ref;
    this._error = error;
    this._complete = true;
    this._discovering = false;
    _ref = this._resolveOnDiscovery;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      i = _ref[_i];
      i.reject(error);
    }
    return this._resolveOnDiscovery = [];
  };

  DiscoveryClient.prototype._resolve = function() {
    var i, _i, _len, _ref;
    this._error = null;
    this._complete = true;
    this._discovering = false;
    _ref = this._resolveOnDiscovery;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      i = _ref[_i];
      i.resolve(this);
    }
    return this._resolveOnDiscovery = [];
  };

  DiscoveryClient.prototype._onDiscoveryResult = function(error, response, body) {
    var err, jsonBody;
    if (!error && response.statusCode !== 200) {
      error = new Error("Failed to get discovery.json");
    }
    if (!error && !body) {
      error = new Error("Discovery body is empty");
    }
    if (error) {
      this._rejectWithError(error);
      return;
    }
    jsonBody = null;
    try {
      jsonBody = JSON.parse(body);
    } catch (_error) {
      err = _error;
      this._rejectWithError(err);
      return;
    }
    if (!_.isPlainObject(jsonBody)) {
      this._rejectWithError(new Error("discovery.json body not an object"));
      return;
    }
    try {
      this._resolveDiscovery(jsonBody);
    } catch (_error) {
      err = _error;
      this._rejectWithError(err);
      return;
    }
    this._attachResources();
    return this._resolve();
  };

  DiscoveryClient.prototype.onDiscovery = function() {
    var deferred;
    deferred = Q.defer();
    if (this._complete) {
      if (this._error) {
        deferred.reject(this._error);
      } else {
        deferred.resolve(this);
      }
    } else if (this._discovering) {
      this._resolveOnDiscovery.push(deferred);
    } else {
      return this.doDiscovery();
    }
    return deferred.promise;
  };

  DiscoveryClient.prototype._attachResources = function() {
    var key, _results;
    _results = [];
    for (key in this.resources) {
      if (!this.resources.hasOwnProperty(key)) {
        continue;
      }
      _results.push(this[key] = this.resources[key]);
    }
    return _results;
  };

  DiscoveryClient.prototype._resolveDiscovery = function(discovery) {
    if (!discovery || !_.isPlainObject(discovery)) {
      throw new TypeError("Discovery not instanceof an object");
    }
    return {
      resources: this.resources = this._resolveResources(discovery.resources),
      schemas: this.schemas = this._resolveSchemas(discovery.schemas)
    };
  };

  DiscoveryClient.prototype._resolveResources = function(resources) {
    var resource, resourceName, resultResources;
    if (!_.isPlainObject(resources)) {
      throw new TypeError("Resources not an object");
    }
    resultResources = {};
    for (resourceName in resources) {
      if (!resources.hasOwnProperty(resourceName)) {
        continue;
      }
      resource = this._resolveResource(resourceName, resources[resourceName]);
      if (resource) {
        resultResources[resourceName] = resource;
      }
    }
    return resultResources;
  };

  DiscoveryClient.prototype._resolveResource = function(resourceName, resource) {
    var method, methodName, resultMethods;
    if (!_.isPlainObject(resource) || !_.isPlainObject(resource.methods)) {
      return null;
    }
    resultMethods = {};
    for (methodName in resource.methods) {
      if (!resource.methods.hasOwnProperty(methodName)) {
        continue;
      }
      method = null;
      try {
        method = this._resolveMethod(methodName, resource.methods[methodName]);
      } catch (_error) {
        continue;
      }
      if (method) {
        resultMethods[methodName] = method;
      }
    }
    return new DiscoveryResource(resourceName, resultMethods, this);
  };

  DiscoveryClient.prototype._resolveMethod = function(methodName, method) {
    if (!_.isPlainObject(method)) {
      return null;
    }
    return new DiscoveryMethod(method.id, method.description, method.httpMethod, method.path, method.parameters, method.parameterOrder, method.request, method.response, this);
  };

  DiscoveryClient.prototype._resolveSchemas = function(schemas) {
    var resultSchemas, schema, schemaName;
    if (!_.isPlainObject(schemas)) {
      throw new TypeError("Schemas not an object");
    }
    resultSchemas = {};
    for (schemaName in schemas) {
      if (!schemas.hasOwnProperty(schemaName)) {
        continue;
      }
      schema = null;
      try {
        schema = this._resolveSchema(schemaName, schemas[schemaName]);
      } catch (_error) {
        continue;
      }
      if (schema) {
        resultSchemas[schemaName] = schema;
      }
    }
    return this.schemas = resultSchemas;
  };

  DiscoveryClient.prototype._resolveSchema = function(schemaName, schema) {
    if (!_.isPlainObject(schema)) {
      return null;
    }
    return new DiscoverySchema(schema.id, schema.type, schema.properties, this);
  };

  DiscoveryClient.prototype.getSchema = function(name) {
    return this.schemas[name];
  };

  DiscoveryClient.prototype.hasSchema = function(name) {
    return !!this.schemas[name];
  };

  DiscoveryClient.prototype.getResource = function(name) {
    return this.resources[name];
  };

  DiscoveryClient.prototype.hasResource = function(name) {
    return !!this.resources[name];
  };

  return DiscoveryClient;

})();

module.exports = {

  /**
  @param {string} endpoint
  @param {string} [basePath='/v1-alpha/']
  @param {boolean} [doDiscovery=false]
   */
  getClient: function(endpoint, basePath, doDiscovery) {
    return new DiscoveryClient(endpoint, basePath, doDiscovery);
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRpc2NvdmVyeS9jbGllbnQuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsbUZBQUE7O0FBQUEsQ0FBQSxHQUFvQixPQUFBLENBQVEsR0FBUixDQUFwQixDQUFBOztBQUFBLE9BQ0EsR0FBb0IsT0FBQSxDQUFRLFNBQVIsQ0FEcEIsQ0FBQTs7QUFBQSxpQkFFQSxHQUFvQixPQUFBLENBQVEsWUFBUixDQUZwQixDQUFBOztBQUFBLGVBR0EsR0FBb0IsT0FBQSxDQUFRLFVBQVIsQ0FIcEIsQ0FBQTs7QUFBQSxlQUlBLEdBQW9CLE9BQUEsQ0FBUSxVQUFSLENBSnBCLENBQUE7O0FBQUEsQ0FLQSxHQUFvQixPQUFBLENBQVEsUUFBUixDQUxwQixDQUFBOztBQUFBO0FBU0UsNEJBQUEsSUFBQSxHQUFNLEVBQU4sQ0FBQTs7QUFBQSw0QkFDQSxnQkFBQSxHQUFrQixFQURsQixDQUFBOztBQUFBLDRCQUVBLEVBQUEsR0FBSSxFQUZKLENBQUE7O0FBQUEsNEJBR0EsSUFBQSxHQUFNLEVBSE4sQ0FBQTs7QUFBQSw0QkFJQSxPQUFBLEdBQVMsRUFKVCxDQUFBOztBQUFBLDRCQUtBLEtBQUEsR0FBTyxFQUxQLENBQUE7O0FBQUEsNEJBTUEsV0FBQSxHQUFhLEVBTmIsQ0FBQTs7QUFBQSw0QkFPQSxZQUFBLEdBQWMsRUFQZCxDQUFBOztBQUFBLDRCQVFBLFFBQUEsR0FBVSxFQVJWLENBQUE7O0FBQUEsNEJBU0EsT0FBQSxHQUFTLEVBVFQsQ0FBQTs7QUFBQSw0QkFVQSxRQUFBLEdBQVUsRUFWVixDQUFBOztBQUFBLDRCQVdBLE9BQUEsR0FBUyxFQVhULENBQUE7O0FBQUEsNEJBWUEsV0FBQSxHQUFhLEVBWmIsQ0FBQTs7QUFBQSw0QkFhQSxTQUFBLEdBQVcsRUFiWCxDQUFBOztBQUFBLDRCQWNBLFFBQUEsR0FBVSxFQWRWLENBQUE7O0FBQUEsNEJBZUEsU0FBQSxHQUFXLEVBZlgsQ0FBQTs7QUFBQSw0QkFnQkEsT0FBQSxHQUFTLEVBaEJULENB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LDRCQThRQSxTQUFBLEdBQVcsU0FBQyxJQUFELEdBQUE7QUFDVCxXQUFPLElBQUksQ0FBQyxPQUFRLENBQUEsSUFBQSxDQUFwQixDQURTO0VBQUEsQ0E5UVgsQ0FBQTs7QUFBQSw0QkFnUkEsU0FBQSxHQUFXLFNBQUMsSUFBRCxHQUFBO0FBQ1QsV0FBTyxDQUFBLENBQUMsSUFBSyxDQUFDLE9BQVEsQ0FBQSxJQUFBLENBQXRCLENBRFM7RUFBQSxDQWhSWCxDQUFBOztBQUFBLDRCQWtSQSxXQUFBLEdBQWEsU0FBQyxJQUFELEdBQUE7QUFDWCxXQUFPLElBQUksQ0FBQyxTQUFVLENBQUEsSUFBQSxDQUF0QixDQURXO0VBQUEsQ0FsUmIsQ0FBQTs7QUFBQSw0QkFvUkEsV0FBQSxHQUFhLFNBQUMsSUFBRCxHQUFBO0FBQ1gsV0FBTyxDQUFBLENBQUMsSUFBSyxDQUFDLFNBQVUsQ0FBQSxJQUFBLENBQXhCLENBRFc7RUFBQSxDQXBSYixDQUFBOzt5QkFBQTs7SUFURixDQUFBOztBQUFBLE1BaVNNLENBQUMsT0FBUCxHQUNFO0FBQUE7QUFBQTs7OztLQUFBO0FBQUEsRUFLQSxTQUFBLEVBQVcsU0FBQyxRQUFELEVBQVcsUUFBWCxFQUFxQixXQUFyQixHQUFBO1dBQ0wsSUFBQSxlQUFBLENBQWdCLFFBQWhCLEVBQTBCLFFBQTFCLEVBQW9DLFdBQXBDLEVBREs7RUFBQSxDQUxYO0NBbFNGLENBQUEiLCJmaWxlIjoiZGlzY292ZXJ5L2NsaWVudC5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIlEgICAgICAgICAgICAgICAgID0gcmVxdWlyZShcInFcIilcbnJlcXVlc3QgICAgICAgICAgID0gcmVxdWlyZShcInJlcXVlc3RcIilcbkRpc2NvdmVyeVJlc291cmNlID0gcmVxdWlyZShcIi4vcmVzb3VyY2VcIilcbkRpc2NvdmVyeU1ldGhvZCAgID0gcmVxdWlyZShcIi4vbWV0aG9kXCIpXG5EaXNjb3ZlcnlTY2hlbWEgICA9IHJlcXVpcmUoXCIuL3NjaGVtYVwiKVxuXyAgICAgICAgICAgICAgICAgPSByZXF1aXJlKFwibG9kYXNoXCIpXG5cbmNsYXNzIERpc2NvdmVyeUNsaWVudFxuICAjIFNUQVJUIFZhbHVlcyBmcm9tIGRpc2NvdmVyeS5qc29uXG4gIGtpbmQ6IFwiXCJcbiAgZGlzY292ZXJ5VmVyc2lvbjogXCJcIlxuICBpZDogXCJcIlxuICBuYW1lOiBcIlwiXG4gIHZlcnNpb246IFwiXCJcbiAgdGl0bGU6IFwiXCJcbiAgZGVzY3JpcHRpb246IFwiXCJcbiAgZG9jdW1lbnRMaW5rOiBcIlwiXG4gIHByb3RvY29sOiBcIlwiXG4gIGJhc2VVcmw6IFwiXCJcbiAgYmFzZVBhdGg6IFwiXCJcbiAgcm9vdFVybDogXCJcIlxuICBzZXJ2aWNlUGF0aDogXCJcIlxuICBiYXRjaFBhdGg6IFwiXCJcbiAgZW5kcG9pbnQ6IFwiXCJcbiAgcmVzb3VyY2VzOiB7fVxuICBzY2hlbWFzOiB7fVxuICAjIEVORCBWYWx1ZXMgZnJvbSBkaXNjb3Zlci5qc29uXG4gICMgU1RBUlQgXCJQcml2YXRlXCIgdmFyaWFibGVzXG4gIF9jb21wbGV0ZTogZmFsc2VcbiAgX2Vycm9yOiBudWxsXG4gIF9kaXNjb3ZlcmluZzogZmFsc2VcbiAgX3Jlc29sdmVPbkRpc2NvdmVyeTogW11cbiAgX3JlcXVlc3Q6IHJlcXVlc3RcbiAgIyBFTkQgXCJQcml2YXRlXCIgdmFyaWFibGVzXG4gICMjIypcbiAgQHBhcmFtIHtzdHJpbmd9IGVuZHBvaW50XG4gIEBwYXJhbSB7c3RyaW5nfSBbYmFzZVBhdGg9Jy92MS1hbHBoYS8nXVxuICBAcGFyYW0ge2Jvb2xlYW59IFtkb0Rpc2NvdmVyeT1mYWxzZV1cbiAgIyMjXG4gIGNvbnN0cnVjdG9yOiAoZW5kcG9pbnQsIGJhc2VQYXRoLCBkb0Rpc2NvdmVyeSkgLT5cbiAgICB0aGlzLmVuZHBvaW50ID0gZW5kcG9pbnRcbiAgICB0aGlzLmJhc2VQYXRoID0gYmFzZVBhdGhcbiAgICB0aGlzLl92YWxpZGF0ZUVuZHBvaW50KClcbiAgICBjbGllbnQgPSB0aGlzXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib25cIiwge1xuICAgICAgZ2V0OiAtPlxuICAgICAgICBjbGllbnQuX29uR2V0KClcbiAgICB9KVxuICAgIGlmIGRvRGlzY292ZXJ5XG4gICAgICB0aGlzLmRvRGlzY292ZXJ5KClcbiAgX29uR2V0OiAtPlxuICAgIGNsaWVudCA9IHRoaXNcbiAgICB7XG4gICAgICBzY2hlbWE6IChzY2hlbWFOYW1lKSAtPlxuICAgICAgICBkZWZlcnJlZCA9IFEuZGVmZXIoKVxuICAgICAgICBjbGllbnQub25EaXNjb3ZlcnkoKS50aGVuKC0+XG4gICAgICAgICAgaWYgbm90IGNsaWVudC5oYXNTY2hlbWEoc2NoZW1hTmFtZSlcbiAgICAgICAgICAgIGRlZmVycmVkXG4gICAgICAgICAgICAgIC5yZWplY3QobmV3IEVycm9yKFwiTm8gc2NoZW1hICN7c2NoZW1hTmFtZX1cIikpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICBkZWZlcnJlZFxuICAgICAgICAgIC5yZXNvbHZlKGNsaWVudC5nZXRTY2hlbWEoc2NoZW1hTmFtZSkpXG4gICAgICAgICkuZmFpbChkZWZlcnJlZC5yZWplY3QpXG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlXG4gICAgICByZXNvdXJjZTogKHJlc291cmNlTmFtZSkgLT5cbiAgICAgICAgZGVmZXJyZWQgPSBRLmRlZmVyKClcbiAgICAgICAgY2xpZW50Lm9uRGlzY292ZXJ5KCkudGhlbigtPlxuICAgICAgICAgIGlmIG5vdCBjbGllbnQuaGFzUmVzb3VyY2UocmVzb3VyY2VOYW1lKVxuICAgICAgICAgICAgZGVmZXJyZWRcbiAgICAgICAgICAgICAgLnJlamVjdChuZXcgRXJyb3IoXCJObyByZXNvdXJjZSAje3Jlc291cmNlTmFtZX1cIikpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICBkZWZlcnJlZFxuICAgICAgICAgIC5yZXNvbHZlKGNsaWVudC5nZXRSZXNvdXJjZShyZXNvdXJjZU5hbWUpKVxuICAgICAgICApLmZhaWwoZGVmZXJyZWQucmVqZWN0KVxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZVxuICAgICAgbWV0aG9kOiAocmVzb3VyY2VOYW1lLCBtZXRob2ROYW1lLCBhcmdzKSAtPlxuICAgICAgICBkZWZlcnJlZCA9IFEuZGVmZXIoKVxuICAgICAgICB0aGlzLnJlc291cmNlKHJlc291cmNlTmFtZSkudGhlbigocmVzb3VyY2UpIC0+XG4gICAgICAgICAgaWYgbm90IHJlc291cmNlLmhhc01ldGhvZChtZXRob2ROYW1lKVxuICAgICAgICAgICAgZGVmZXJyZWRcbiAgICAgICAgICAgICAgLnJlamVjdChuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgXCJObyBtZXRob2QgI3ttZXRob2ROYW1lfSBmb3IgcmVzb3VyY2UgI3tyZXNvdXJjZU5hbWV9XCJcbiAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIG1ldGhvZCA9IHJlc291cmNlLndyYXBDYWxsTWV0aG9kKG1ldGhvZE5hbWUpXG4gICAgICAgICAgaWYgbm90IGFyZ3NcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUobWV0aG9kKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgaWYgbm90IF8uaXNBcnJheShhcmdzKVxuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgXCJBcmd1bWVudHMgbXVzdCBiZSBhbiBhcnJheVwiXG4gICAgICAgICAgICApKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgbWV0aG9kLmFwcGx5KHJlc291cmNlLCBhcmdzKVxuICAgICAgICAgICAgLnRoZW4oZGVmZXJyZWQucmVzb2x2ZSlcbiAgICAgICAgICAgIC5mYWlsKGRlZmVycmVkLnJlamVjdClcbiAgICAgICAgKS5mYWlsKGRlZmVycmVkLnJlamVjdClcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2VcbiAgICB9XG4gIF92YWxpZGF0ZUVuZHBvaW50OiAtPlxuICAgIGlmIG5vdCB0aGlzLmVuZHBvaW50XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFbmRwb2ludCBpcyByZXF1aXJlZFwiKVxuICAgIGlmIHR5cGVvZiB0aGlzLmVuZHBvaW50IGlzbnQgXCJzdHJpbmdcIlxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkVuZHBvaW50IGlzIGV4cGVjdGVkIHRvIGJlIGEgc3RyaW5nXCIpXG4gICAgaWYgdGhpcy5iYXNlUGF0aCBpcyBudWxsIG9yIHRoaXMuYmFzZVBhdGggaXMgdW5kZWZpbmVkXG4gICAgICB0aGlzLmJhc2VQYXRoID0gXCIvdjEtYWxwaGEvXCJcbiAgICBlbHNlIGlmIHR5cGVvZiB0aGlzLmJhc2VQYXRoIGlzbnQgXCJzdHJpbmdcIlxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkJhc2UgcGF0aCBpcyBleHBlY3RlZCB0byBiZSBhIHN0cmluZ1wiKVxuICAgIGlmIHRoaXMuX2xhc3RDaGFyYWN0ZXIodGhpcy5lbmRwb2ludCkgaXMgXCIvXCJcbiAgICAgIHRoaXMuZW5kcG9pbnQgPSB0aGlzLl9zdHJpcExhc3RDaGFyYWN0ZXIodGhpcy5lbmRwb2ludClcbiAgICAjIEVuc3VyZSBiYXNlUGF0aCBoYXMgYXQgbGVhc3QgXCIvXCJcbiAgICAjIG9yIGlzIFwiLyN7cGF0aH0vXCJcbiAgICBpZiB0aGlzLl9maXJzdENoYXJhY3Rlcih0aGlzLmJhc2VQYXRoKSBpc250IFwiL1wiXG4gICAgICB0aGlzLmJhc2VQYXRoID0gXCIvI3t0aGlzLmJhc2VQYXRofVwiXG4gICAgaWYgdGhpcy5fbGFzdENoYXJhY3Rlcih0aGlzLmJhc2VQYXRoKSBpc250IFwiL1wiXG4gICAgICB0aGlzLmJhc2VQYXRoID0gXCIje3RoaXMuYmFzZVBhdGh9L1wiXG4gIF9zdHJpcExhc3RDaGFyYWN0ZXI6IChzdHIpIC0+XG4gICAgaWYgbm90IHN0ciBvciB0eXBlb2Ygc3RyIGlzbnQgXCJzdHJpbmdcIlxuICAgICAgcmV0dXJuIFwiXCJcbiAgICBsZW5ndGggPSBzdHIubGVuZ3RoXG4gICAgc3RyLnN1YnN0cmluZygwLCBsZW5ndGggLSAxKVxuICBfZmlyc3RDaGFyYWN0ZXI6IChzdHIpIC0+XG4gICAgaWYgbm90IHN0ciBvciB0eXBlb2Ygc3RyIGlzbnQgXCJzdHJpbmdcIlxuICAgICAgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gc3RyLnN1YnN0cmluZygwLCAxKVxuICBfbGFzdENoYXJhY3RlcjogKHN0cikgLT5cbiAgICBpZiBub3Qgc3RyIG9yIHR5cGVvZiBzdHIgaXNudCBcInN0cmluZ1wiXG4gICAgICByZXR1cm4gbnVsbFxuICAgIGxlbmd0aCA9IHN0ci5sZW5ndGhcbiAgICBzdHIuc3Vic3RyaW5nKGxlbmd0aCAtIDEsIGxlbmd0aClcbiAgZG9EaXNjb3Zlcnk6IC0+XG4gICAgZGVmZXJyZWQgPSBRLmRlZmVyKClcbiAgICBpZiB0aGlzLl9jb21wbGV0ZVxuICAgICAgaWYgdGhpcy5fZXJyb3JcbiAgICAgICAgZGVmZXJyZWQucmVqZWN0KHRoaXMuX2Vycm9yKVxuICAgICAgZWxzZVxuICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHRoaXMpXG4gICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZVxuICAgIHRoaXMuX3Jlc29sdmVPbkRpc2NvdmVyeS5wdXNoKGRlZmVycmVkKVxuICAgIGlmIHRoaXMuX2Rpc2NvdmVyaW5nXG4gICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZVxuICAgIHRoaXMuX2Rpc2NvdmVyaW5nID0gdHJ1ZVxuICAgIHRoaXMuX2RvRGlzY292ZXJ5UmVxdWVzdCgpXG4gICAgZGVmZXJyZWQucHJvbWlzZVxuICBfZG9EaXNjb3ZlcnlSZXF1ZXN0OiAtPlxuICAgIGNsaWVudCA9IHRoaXNcbiAgICB0aGlzLl9yZXF1ZXN0LmdldChcbiAgICAgIFwiI3t0aGlzLmVuZHBvaW50fSN7dGhpcy5iYXNlUGF0aH1kaXNjb3ZlcnkuanNvblwiLFxuICAgIChlcnJvciwgcmVzcG9uc2UsIGJvZHkpIC0+XG4gICAgICBjbGllbnQuX29uRGlzY292ZXJ5UmVzdWx0KGVycm9yLCByZXNwb25zZSwgYm9keSlcbiAgICApXG4gIF9yZWplY3RXaXRoRXJyb3I6IChlcnJvcikgLT5cbiAgICB0aGlzLl9lcnJvciA9IGVycm9yXG4gICAgdGhpcy5fY29tcGxldGUgPSB0cnVlXG4gICAgdGhpcy5fZGlzY292ZXJpbmcgPSBmYWxzZVxuICAgIGZvciBpIGluIHRoaXMuX3Jlc29sdmVPbkRpc2NvdmVyeVxuICAgICAgaS5yZWplY3QoZXJyb3IpXG4gICAgdGhpcy5fcmVzb2x2ZU9uRGlzY292ZXJ5ID0gW11cbiAgX3Jlc29sdmU6IC0+XG4gICAgdGhpcy5fZXJyb3IgPSBudWxsXG4gICAgdGhpcy5fY29tcGxldGUgPSB0cnVlXG4gICAgdGhpcy5fZGlzY292ZXJpbmcgPSBmYWxzZVxuICAgIGZvciBpIGluIHRoaXMuX3Jlc29sdmVPbkRpc2NvdmVyeVxuICAgICAgaS5yZXNvbHZlKHRoaXMpXG4gICAgdGhpcy5fcmVzb2x2ZU9uRGlzY292ZXJ5ID0gW11cbiAgX29uRGlzY292ZXJ5UmVzdWx0OiAoZXJyb3IsIHJlc3BvbnNlLCBib2R5KSAtPlxuICAgIGlmIG5vdCBlcnJvciBhbmQgcmVzcG9uc2Uuc3RhdHVzQ29kZSBpc250IDIwMFxuICAgICAgIyBUT0RPIEltcGxlbWVudCByZWRpcmVjdGlvbiAzMDEsIDMwMlssIDMwM10sIDMwNFxuICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZ2V0IGRpc2NvdmVyeS5qc29uXCIpXG4gICAgaWYgbm90IGVycm9yIGFuZCBub3QgYm9keVxuICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoXCJEaXNjb3ZlcnkgYm9keSBpcyBlbXB0eVwiKVxuICAgIGlmIGVycm9yXG4gICAgICB0aGlzLl9yZWplY3RXaXRoRXJyb3IoZXJyb3IpXG4gICAgICByZXR1cm5cbiAgICBqc29uQm9keSA9IG51bGxcbiAgICB0cnlcbiAgICAgIGpzb25Cb2R5ID0gSlNPTi5wYXJzZShib2R5KVxuICAgIGNhdGNoIGVyclxuICAgICAgdGhpcy5fcmVqZWN0V2l0aEVycm9yKGVycilcbiAgICAgIHJldHVyblxuICAgIGlmIG5vdCBfLmlzUGxhaW5PYmplY3QoanNvbkJvZHkpXG4gICAgICB0aGlzLl9yZWplY3RXaXRoRXJyb3IobmV3IEVycm9yKFwiZGlzY292ZXJ5Lmpzb24gYm9keSBub3QgYW4gb2JqZWN0XCIpKVxuICAgICAgcmV0dXJuXG4gICAgdHJ5XG4gICAgICB0aGlzLl9yZXNvbHZlRGlzY292ZXJ5KGpzb25Cb2R5KVxuICAgIGNhdGNoIGVyclxuICAgICAgdGhpcy5fcmVqZWN0V2l0aEVycm9yKGVycilcbiAgICAgIHJldHVyblxuICAgIHRoaXMuX2F0dGFjaFJlc291cmNlcygpXG4gICAgdGhpcy5fcmVzb2x2ZSgpXG4gIG9uRGlzY292ZXJ5OiAtPlxuICAgIGRlZmVycmVkID0gUS5kZWZlcigpXG4gICAgaWYgdGhpcy5fY29tcGxldGVcbiAgICAgIGlmIHRoaXMuX2Vycm9yXG4gICAgICAgIGRlZmVycmVkLnJlamVjdCh0aGlzLl9lcnJvcilcbiAgICAgIGVsc2VcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSh0aGlzKVxuICAgIGVsc2UgaWYgdGhpcy5fZGlzY292ZXJpbmdcbiAgICAgIHRoaXMuX3Jlc29sdmVPbkRpc2NvdmVyeS5wdXNoKGRlZmVycmVkKVxuICAgIGVsc2VcbiAgICAgICMgRGlzY292ZXJ5IGhhc24ndCBiZWVuIHN0YXJ0ZWRcbiAgICAgIHJldHVybiB0aGlzLmRvRGlzY292ZXJ5KClcbiAgICBkZWZlcnJlZC5wcm9taXNlXG4gIF9hdHRhY2hSZXNvdXJjZXM6IC0+XG4gICAgZm9yIGtleSBvZiB0aGlzLnJlc291cmNlc1xuICAgICAgaWYgbm90IHRoaXMucmVzb3VyY2VzLmhhc093blByb3BlcnR5KGtleSlcbiAgICAgICAgY29udGludWVcbiAgICAgIHRoaXNba2V5XSA9IHRoaXMucmVzb3VyY2VzW2tleV1cbiAgX3Jlc29sdmVEaXNjb3Zlcnk6IChkaXNjb3ZlcnkpIC0+XG4gICAgaWYgbm90IGRpc2NvdmVyeSBvciBub3QgXy5pc1BsYWluT2JqZWN0KGRpc2NvdmVyeSlcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJEaXNjb3Zlcnkgbm90IGluc3RhbmNlb2YgYW4gb2JqZWN0XCIpXG4gICAge1xuICAgICAgcmVzb3VyY2VzOiB0aGlzLnJlc291cmNlcyA9IHRoaXMuX3Jlc29sdmVSZXNvdXJjZXMoZGlzY292ZXJ5LnJlc291cmNlcylcbiAgICAgIHNjaGVtYXM6IHRoaXMuc2NoZW1hcyA9IHRoaXMuX3Jlc29sdmVTY2hlbWFzKGRpc2NvdmVyeS5zY2hlbWFzKVxuICAgIH1cbiAgX3Jlc29sdmVSZXNvdXJjZXM6IChyZXNvdXJjZXMpIC0+XG4gICAgaWYgbm90IF8uaXNQbGFpbk9iamVjdChyZXNvdXJjZXMpXG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUmVzb3VyY2VzIG5vdCBhbiBvYmplY3RcIilcbiAgICByZXN1bHRSZXNvdXJjZXMgPSB7fVxuICAgIGZvciByZXNvdXJjZU5hbWUgb2YgcmVzb3VyY2VzXG4gICAgICBpZiBub3QgcmVzb3VyY2VzLmhhc093blByb3BlcnR5KHJlc291cmNlTmFtZSlcbiAgICAgICAgY29udGludWVcbiAgICAgIHJlc291cmNlID0gdGhpcy5fcmVzb2x2ZVJlc291cmNlKHJlc291cmNlTmFtZSwgcmVzb3VyY2VzW3Jlc291cmNlTmFtZV0pXG4gICAgICBpZiByZXNvdXJjZVxuICAgICAgICByZXN1bHRSZXNvdXJjZXNbcmVzb3VyY2VOYW1lXSA9IHJlc291cmNlXG4gICAgcmVzdWx0UmVzb3VyY2VzXG4gIF9yZXNvbHZlUmVzb3VyY2U6IChyZXNvdXJjZU5hbWUsIHJlc291cmNlKSAtPlxuICAgIGlmIG5vdCBfLmlzUGxhaW5PYmplY3QocmVzb3VyY2UpIG9yIG5vdCBfLmlzUGxhaW5PYmplY3QocmVzb3VyY2UubWV0aG9kcylcbiAgICAgIHJldHVybiBudWxsXG4gICAgcmVzdWx0TWV0aG9kcyA9IHt9XG4gICAgZm9yIG1ldGhvZE5hbWUgb2YgcmVzb3VyY2UubWV0aG9kc1xuICAgICAgaWYgbm90IHJlc291cmNlLm1ldGhvZHMuaGFzT3duUHJvcGVydHkobWV0aG9kTmFtZSlcbiAgICAgICAgY29udGludWVcbiAgICAgIG1ldGhvZCA9IG51bGxcbiAgICAgIHRyeVxuICAgICAgICBtZXRob2QgPSB0aGlzLl9yZXNvbHZlTWV0aG9kKG1ldGhvZE5hbWUsIHJlc291cmNlLm1ldGhvZHNbbWV0aG9kTmFtZV0pXG4gICAgICBjYXRjaFxuICAgICAgICBjb250aW51ZVxuICAgICAgaWYgbWV0aG9kXG4gICAgICAgIHJlc3VsdE1ldGhvZHNbbWV0aG9kTmFtZV0gPSBtZXRob2RcbiAgICBuZXcgRGlzY292ZXJ5UmVzb3VyY2UocmVzb3VyY2VOYW1lLCByZXN1bHRNZXRob2RzLCB0aGlzKVxuICBfcmVzb2x2ZU1ldGhvZDogKG1ldGhvZE5hbWUsIG1ldGhvZCkgLT5cbiAgICBpZiBub3QgXy5pc1BsYWluT2JqZWN0KG1ldGhvZClcbiAgICAgIHJldHVybiBudWxsXG4gICAgbmV3IERpc2NvdmVyeU1ldGhvZChcbiAgICAgIG1ldGhvZC5pZCxcbiAgICAgIG1ldGhvZC5kZXNjcmlwdGlvbixcbiAgICAgIG1ldGhvZC5odHRwTWV0aG9kLFxuICAgICAgbWV0aG9kLnBhdGgsXG4gICAgICBtZXRob2QucGFyYW1ldGVycyxcbiAgICAgIG1ldGhvZC5wYXJhbWV0ZXJPcmRlcixcbiAgICAgIG1ldGhvZC5yZXF1ZXN0LFxuICAgICAgbWV0aG9kLnJlc3BvbnNlLFxuICAgICAgdGhpc1xuICAgIClcbiAgX3Jlc29sdmVTY2hlbWFzOiAoc2NoZW1hcykgLT5cbiAgICBpZiBub3QgXy5pc1BsYWluT2JqZWN0KHNjaGVtYXMpXG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU2NoZW1hcyBub3QgYW4gb2JqZWN0XCIpXG4gICAgcmVzdWx0U2NoZW1hcyA9IHt9XG4gICAgZm9yIHNjaGVtYU5hbWUgb2Ygc2NoZW1hc1xuICAgICAgaWYgbm90IHNjaGVtYXMuaGFzT3duUHJvcGVydHkoc2NoZW1hTmFtZSlcbiAgICAgICAgY29udGludWVcbiAgICAgIHNjaGVtYSA9IG51bGxcbiAgICAgIHRyeVxuICAgICAgICBzY2hlbWEgPSB0aGlzLl9yZXNvbHZlU2NoZW1hKHNjaGVtYU5hbWUsIHNjaGVtYXNbc2NoZW1hTmFtZV0pXG4gICAgICBjYXRjaFxuICAgICAgICBjb250aW51ZVxuICAgICAgaWYgc2NoZW1hXG4gICAgICAgIHJlc3VsdFNjaGVtYXNbc2NoZW1hTmFtZV0gPSBzY2hlbWFcbiAgICB0aGlzLnNjaGVtYXMgPSByZXN1bHRTY2hlbWFzXG4gIF9yZXNvbHZlU2NoZW1hOiAoc2NoZW1hTmFtZSwgc2NoZW1hKSAtPlxuICAgIGlmIG5vdCBfLmlzUGxhaW5PYmplY3Qoc2NoZW1hKVxuICAgICAgcmV0dXJuIG51bGxcbiAgICBuZXcgRGlzY292ZXJ5U2NoZW1hKFxuICAgICAgc2NoZW1hLmlkLFxuICAgICAgc2NoZW1hLnR5cGUsXG4gICAgICBzY2hlbWEucHJvcGVydGllcyxcbiAgICAgIHRoaXNcbiAgICApXG4gIGdldFNjaGVtYTogKG5hbWUpIC0+XG4gICAgcmV0dXJuIHRoaXMuc2NoZW1hc1tuYW1lXVxuICBoYXNTY2hlbWE6IChuYW1lKSAtPlxuICAgIHJldHVybiAhIXRoaXMuc2NoZW1hc1tuYW1lXVxuICBnZXRSZXNvdXJjZTogKG5hbWUpIC0+XG4gICAgcmV0dXJuIHRoaXMucmVzb3VyY2VzW25hbWVdXG4gIGhhc1Jlc291cmNlOiAobmFtZSkgLT5cbiAgICByZXR1cm4gISF0aGlzLnJlc291cmNlc1tuYW1lXVxuXG5cbm1vZHVsZS5leHBvcnRzID1cbiAgIyMjKlxuICBAcGFyYW0ge3N0cmluZ30gZW5kcG9pbnRcbiAgQHBhcmFtIHtzdHJpbmd9IFtiYXNlUGF0aD0nL3YxLWFscGhhLyddXG4gIEBwYXJhbSB7Ym9vbGVhbn0gW2RvRGlzY292ZXJ5PWZhbHNlXVxuICAjIyNcbiAgZ2V0Q2xpZW50OiAoZW5kcG9pbnQsIGJhc2VQYXRoLCBkb0Rpc2NvdmVyeSkgLT5cbiAgICBuZXcgRGlzY292ZXJ5Q2xpZW50KGVuZHBvaW50LCBiYXNlUGF0aCwgZG9EaXNjb3ZlcnkpXG4iXX0=